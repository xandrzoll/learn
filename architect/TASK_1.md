# 1.8 Основы архитектуры
## Задача 1. REST vs Messaging
Что нужно сделать

Вы проектируете систему интернет-магазина, в котором есть два приложения, Order Service и Delivery Service:

- Order Service отвечает за принятие заказов у клиента;
- Delivery Service рассчитывает дату доставки товара в зависимости от загрузки курьерской службы.

1. Продумайте интеграцию между Order Service и Delivery Service. Сравните два подхода к интеграции — REST, синхронный подход к интеграции, и Messaging, при котором запросы отправляются асинхронно.

2. Ответьте на вопросы:

    Какие плюсы и минусы у REST?
    Какие плюсы и минусы у Messaging?
    Какие факторы должны учитываться при принятии решения? *(необязательный вопрос, ответьте по желанию)

---

## Решение

**REST** подход - Запрос-ответ. Синхронный режим. Клиент отправляет запрос к серверу, сервер обрабатывает запрос и 
отвечает клиенту.
Поддерживает CRUD операции с помощью методов GET, POST, PUT, DELETE. Имеет публично доступный и открытый API.

Order Service будет делать HTTP-запросы напрямую к Delivery Service и ждать в ответ информацию о доставке.

**MESSAGING** подход - Очередь сообщений. Продюсер отправляет сообщение в очередь, консьюмер вычитывает сообщение.
Order Service отправляет запрос в очередь сообщений, а Delivery Service обрабатывает запрос в своем темпе и отправляет 
ответ обратно в очередь.

### Плюсы и минусы у REST:

Плюсы REST:

- Простота реализации.
- Хорошо и понятное взаимодействие сервисов.
- Кэширование результатов запросов.

Минусы REST:

- Синхронный характер может приводить к блокировкам.
- Повышенное использование ресурсов при большом количестве запросов.
- Не возможно переиспользование ресурсов и реализации шаблона многие-ко-многим.

### Плюсы и минусы у Messaging:

Плюсы Messaging:

- Меньшая вероятность блокировок за счет асинхронной обработки запросов.
- Гибкость в масштабировании и управлении потоками данных.
- Возможность переиспользования ресурсов.
- Возможен большой масштаб и огромное кол-во запросов.
- Более высокая надежность доставки запросов за счет минимизации риска отключения одного из сервисов.

Минусы Messaging:
- Сложнее настроить и отладить из-за асинхронной природы.
- Требует наличия инфраструктуры сообщений (брокера сообщений, очередей и т.д.).

---


## Задача 2. Database
Что нужно сделать

Вы определились с интеграцией между сервисами. Теперь вам нужно решить, как будут храниться данные.

1. Выберите один из способов хранения данных:
- общую базу данных (БД) для этих сервисов:
- отдельные базы данных для каждого сервиса:

2. Проанализируйте компромиссы в предложенных решениях, оцените преимущества и недостатки каждого подхода и ответьте на вопросы:
- Какие плюсы и минусы у общей БД?
- Какие плюсы и минусы у раздельных БД?
- Какие факторы должны учитываться при принятии решения? *(необязательный вопрос, ответьте по желанию)
---

## Решение

### Общая база данных для этих сервисов:

Плюсы:
- Проще поддерживать целостность данных между сервисами.
- Удобство использования для операций, которые требуют данных из обоих сервисов.

Минусы:
- Риск конфликтов при одновременном доступе к данным из разных сервисов.
- Повышенная нагрузка на одну БД.
- Сложности в масштабировании и изменении структуры базы данных из-за связанности сервисов.

### Отдельные базы данных для каждого сервиса:
Плюсы:
- Изоляция данных между сервисами, что снижает риск конфликтов.
- Большая гибкость при масштабировании и изменении структуры базы данных для каждого сервиса.

Минусы:
- Сложнее обеспечить целостность данных и поддерживать их согласованность между сервисами.
- Увеличивается сложность при необходимости выполнения операций, требующих данные из нескольких сервисов.

Факторы при принятии решения:

- Сложность бизнес-логики и взаимодействия между сервисами.
- Требования к производительности и масштабируемости.
- Уровень изоляции и безопасности данных.
- отовность и возможность обеспечить согласованность данных между сервисами.
- Возможность использования технологий синхронизации данных или шаблонов проектирования для поддержания целостности.
- Ресурсы, доступные для поддержания и разработки двух подходов.
